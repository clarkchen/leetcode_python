"""
https://leetcode-cn.com/problems/stone-game/

这是一种超时的解决办法，虽然结果正确

"""
from typing import List


class Solution:
    def get_max_stones(self, piles, start, end):
        if start >= end:
            return 0
        if (start, end) in self.RESMAP:
            res = self.RESMAP[(start, end)][0]
            return res

        total = sum(piles[start:end])
        others_list = []
        # take_start
        other_take = self.get_max_stones(piles, start + 1, end)
        others_list.append(other_take)
        # take end
        other_take = self.get_max_stones(piles, start, end - 1)
        others_list.append(other_take)

        res = max([total - x for x in others_list])
        l = self.RESMAP.get((start, end), [])
        l.append(res)
        self.RESMAP[(start, end)] = l

        return res

    def stoneGame(self, piles: List[int]) -> bool:
        self.RESMAP = {}


        first_max = self.get_max_stones(piles, 0, len(piles))
        return first_max > sum(piles) - first_max


if __name__ == '__main__':
    s = Solution()
    piles = [5, 3, 4, 5]

    print(s.stoneGame(piles))
    assert s.stoneGame(piles) == True

    piles = [5, 1, 100, 4, 10]
    print(s.stoneGame(piles))
    assert s.stoneGame(piles) == False

    piles = [1]
    print(s.stoneGame(piles))
    assert s.stoneGame(piles) == True

    piles = [1, 10, 3]
    print(s.stoneGame(piles))
    assert s.stoneGame(piles) == False

    piles = [235, 105, 311, 484, 170, 490, 88, 400, 231, 411, 497, 393, 410, 260, 365, 201, 68, 359, 320, 442, 190, 481,
             277, 409, 87, 467, 415, 446, 224, 414, 103, 409, 65, 134, 321, 489, 220, 310, 37, 282, 394, 117, 142, 412,
             367, 330, 366, 35, 46, 120, 198, 205, 397, 198, 356, 364, 498, 119, 196, 272, 288, 69, 330, 386, 304, 236,
             319, 401, 407, 169, 113, 468, 412, 283, 482, 42, 235, 246, 344, 385, 169, 214, 291, 379, 469, 170, 320,
             195, 239, 348, 295, 369, 42, 338, 308, 101, 436, 91, 135, 312, 144, 45, 342, 345, 460, 282, 437, 486, 491,
             110, 208, 315, 417, 168, 473, 49, 405, 274, 9, 395, 59, 491, 349, 402, 24, 329, 59, 304, 390, 135, 468, 30,
             487, 193, 202, 177, 358, 197, 271, 444, 256, 12, 96, 292, 143, 398, 315, 406, 6, 443, 401, 78, 222, 339,
             267, 270, 431, 140, 118, 316, 257, 21, 158, 57, 153, 232, 132, 270, 184, 355, 137, 147, 102, 165, 113, 136,
             287, 265, 428, 317, 469, 91, 201, 233, 308, 271, 402, 85, 371, 138, 138, 348, 79, 206, 242, 356, 312, 202,
             293, 374, 245, 106, 453, 452, 479, 206, 242, 402, 489, 400, 198, 269, 312, 234, 252, 176, 456, 202, 190,
             421, 237, 500, 36, 419, 181, 282, 24, 331, 244, 431, 418, 131, 381, 350, 135, 98, 108, 21, 235, 283, 371,
             476, 181, 190, 38, 431, 64, 49, 98, 438, 177, 55, 41, 127, 379, 453, 359, 91, 167, 67, 395, 110, 475, 487,
             391, 316, 226, 310, 70, 407, 431, 281, 34, 72, 308, 230, 453, 238, 276, 474, 75, 108, 346, 435, 200, 402,
             483, 260, 101, 403, 430, 409, 476, 131, 72, 319, 141, 424, 79, 234, 29, 33, 348, 249, 262, 73, 45, 351,
             189, 159, 98, 394, 104, 225, 275, 287, 70, 219, 296, 372, 439, 427, 410, 122, 66, 348, 65, 120, 325, 210,
             34, 430, 155, 388, 278, 337, 315, 169, 43, 424, 29, 396, 459, 49, 203, 322, 490, 81, 233, 117, 71, 80, 154,
             31, 370, 296, 241, 376, 92, 116, 381, 397, 170, 73, 444, 4, 383, 259, 402, 235, 459, 439, 210, 436, 62, 54,
             100, 140, 289, 431, 248, 117, 201, 25, 25, 410, 397, 424, 328, 83, 409, 492, 317, 111, 422, 141, 141, 10,
             106, 239, 177, 86, 7, 350, 409, 185, 334, 217, 107, 20, 79, 296, 281, 232, 254, 375, 169, 262, 427, 343,
             26, 53, 389, 380, 67, 12, 201, 71, 250, 148, 98, 200, 133, 473, 441, 456, 280, 265, 493, 416, 388, 160,
             377, 203, 369, 230, 42, 223, 329, 251, 270, 475, 166, 438, 35, 324, 366, 25, 73, 107, 398, 16, 295, 155,
             267, 135, 1, 1, 479, 132, 403, 71, 144, 291, 444, 170, 490, 164, 92, 192, 168, 48, 452, 294, 126, 495, 60,
             370, 121, 163, 472, 161, 206, 281, 156, 152, 336, 303, 356, 178]
    print(s.stoneGame(piles))
